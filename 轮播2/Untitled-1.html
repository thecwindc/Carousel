<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
    <script type="text/javascript" src="https://www.imooc.com/static/lib/jquery/1.9.1/jquery.js"></script>
</head>
<body>
   <div class="w">
       <div id="i">
           <img src="https://img0.pclady.com.cn/pclady/pet/choice/cat/1701/6.jpg" alt="">
           <img src="https://neco-cat.com/wp-content/uploads/2017/07/cat005-1-400x400.jpg" alt="">
           <img src="https://rasora-sapporo.com/wp/wp-content/uploads/2018/05/%E2%9B%84%EF%B8%8F%E6%9C%AD%E5%B9%8C%E5%BA%97%E2%9B%84%EF%B8%8F%E7%8C%AB%E5%86%99%E7%9C%9F%E9%A4%A8%F0%9F%90%88%F0%9F%90%BE_180523_0220-400x400.jpg" alt="">
       </div>
   </div>
   <span id='buttons'>
        <span id="p1">第1张</span>
        <span id="p2">第2张</span>
        <span id="p3">第3张</span>
   </span>
</body>
<script>
    // $(p1).on('click',function(){
    //     $('#i').css({
    //         transform:'translateX(0)'
    //     })
    // })
    // $(p2).on('click',function(){
    //     $('#i').css({
    //         transform:'translateX(-400px)'
    //     })
    // })
    // $(p3).on('click',function(){
    //     $('#i').css({
    //         transform:'translateX(-800px)'
    //     })
    // })
    var allbuttons = $('#buttons > span')
    for(let i=0;i<allbuttons.length;i++){
        allbuttons.eq(i).on('click',function(x){
            var index = $(x.currentTarget).index()
            var p = index *-400
            $('#i').css({
                transform:'translateX('+p+'px)'
            })
            n = index
            allbuttons.eq(n%size).addClass('red').siblings('.red').removeClass('red')
        })
    }

    var n = 0
    var size = allbuttons.length
    allbuttons.eq(n%size).addClass('red').siblings('.red').removeClass('red')
    var timeId = setInterval(()=>{
        n=n+1
        allbuttons.eq(n%size).trigger('click').addClass('red').siblings('.red').removeClass('red')
    },3000)
    $('.w').on('mouseenter',function(){
        window.clearInterval(timeId)
    })
    $('.w').on('mouseleave',function(){
        var timeId = setInterval(()=>{
        n=n+1
        allbuttons.eq(n%size).trigger('click').addClass('red').siblings('.red').removeClass('red')
    },3000)
    })
</script>
</html>